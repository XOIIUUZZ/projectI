<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<link href="css/样式.css" rel="stylesheet">
	<style>
		.goodsbox{
			width: 20%;
			float: left;
			text-align:center;
			border: 1px solid #E2E2E2;
			box-sizing: border-box;
		}
	</style>
	<body>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		<div class="goodsbox">
			<img src="img/babyimg.png" width="200px" height="200px">
			<p class="font-12">名字</p>
			<p class="font-12">价格</p>
		</div>
		
		<div class="textalign pages">
		<button class="prev page-btn">上一页</button> 
		<button class="next page-btn">下一页</button>
		</div>
		
		
	</body>
</html>
<script src="js/jquery-2.1.0.js"></script>
<script>
	var requestURL= 'http://192.168.97.231:3000/'
	
	function getquerychill(name){
		var search = window.location.search
		
		search = search.substr(1)
		
		var reg = new RegExp('(^|&)'+name+'=([^&]*)(&|$)')
		
		var matchthin = search.match(reg);
		if(matchthin){
			return matchthin[2]
		}
		return '';
	}
	var total=0
	var page = getquerychill('page')||1
	
	var count = getquerychill('count')||2
	
	$.ajax({
		type:"get",
		url:requestURL+'list',
		async:true,
		data:{
			page:page,
			count:count
		},
		success:function(res){
		 var pagehtml = ''
		 
		 total= res.total
		 
		 for(var i=0;i<res.total;i++){
		 	pagehtml+=`<a href='ajaxpagejump.html?page=${i+1}&count=${count}'>${i+1}</a>`
		 }
		 $('.pages button:first').after(pagehtml)
		}
	});
	 
	
	console.log(total)
	$('.page-btn').click(function(){
		
		if(page<=1 && $(this).hasClass('prev')){
			return;
		}
		if(page>=total && $(this).hasClass('next')){
			return;
			console.log(111)
		}
		console.log($(this))
		if($(this).hasClass('prev')){
			page--
			
		}
		else{
			page++
			
		}
		
		window.location.href='ajaxpagejump.html?page='+page+'&count='+count
	})
</script>