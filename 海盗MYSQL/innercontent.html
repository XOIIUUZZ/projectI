<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="js/bootstrap-3.3.7-dist/css/bootstrap.css"/>
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/normalization.css"/>
		<link rel="stylesheet" type="text/css" href="css/innercontent.css"/>
	</head>
	<body style="padding: 20px; padding-top: 37px;">
		<div class="goods-control">
			<ul>
				<li class="goods-list">商品列表<a class="addbtn">[+]</a></li>
				<li class="cutline-row"></li>
				<li><a class="actived" href="">全部商品</a></li>
				<li><a href="">下架商品</a></li>
				<li><a href="">库存警告</a></li>
				<li><a href="">回收站</a></li>
			</ul>
			<div class="cutline-width"></div>
		</div>
		<div class="margin-tb">
			<div class="tips-bar">
				<span class="tipswarm">温馨提示</span>
				<span class="close-tip">关闭操作提示</span>
			</div>
			<div class="tips-text padding-top-5">
				<p>- 添加商品时可选择商品分类，用户可根据分类查询商品列表</p>
				<p>- 点击分类名前“+”符号，显示当前分类的下级分类</p>
				<p>- 对分类作任何更改后，都需要到 设置 -> 清理缓存 清理商品分类，新的设置才会生效</p>
			</div>
		</div>
			<div class="cutline-width"></div>
			<div class="classify-part margin-t-10">
				<div class="clearfix margin-b-10">
					<div class="margin-r-10 float-l font-0">
						<span class="margin-r-10 font-12">按分类查看</span>
						<input placeholder="请选择分类" type="text" readonly="readonly" class="padding-lr-10 input-classify"/>
						<div class="icon-form"></div>
					</div>
					<div class="margin-r-10 float-l">
						<span class="margin-r-10">搜索</span>
						<input placeholder="输入商品名称/货号/条形码" type="text" class="padding-lr-10" style="height: 26px; width: 200px;"/>
					</div>
				</div>
				<div class="font-0">
					<span class="margin-r-10 font-12">按品牌查看</span>
						<input placeholder="商品选择" type="text" readonly="readonly" class="padding-lr-10 brand-classify"/>
						<div class="icon-form"></div>
						<input type="submit" value="查询" class="searchbtn" />
				</div>
			</div>
			
			<div class="table-operation">
				<ul>
					<li class="btnadd">
							<span class="icon-add"></span>
							<a data-toggle="modal" data-target = ".modal-add">添加 </a>
					</li>
					<div class="cutline cutline-attribute"></div>
					<li><span class="icon-delete"></span>删除</li>
					<div class="cutline cutline-attribute"></div>
					<li><span class="icon-import"></span>导入</li>
					<div class="cutline cutline-attribute"></div>
					<li><span class="icon-output"></span>导出</li>
					<div class="cutline cutline-attribute"></div>
				</ul>
			</div>
			<div class="attrbute-lists clearfix">
					<div class="checkedbtn" >
						<input type="checkbox" class="checkedbtn-itself1"/>
					</div>
					<div class="cutline"></div>
						<div class="attrbutes" style="width:145px;">商品货号</div>
					<div class="cutline"></div>
						<div class=" attrbutes" style="width:243px;">商品名称</div>
					<div class="cutline"></div>
						<div class=" attrbutes" style="width: 248px;">品牌&分类</div>
					<div class="cutline"></div>
						<div class=" attrbutes" style="width:97px;">价格</div>
					<div class="cutline"></div>
						<div class=" attrbutes" style="width:48px;">库存</div>
					<div class="cutline"></div>
						<div class=" attrbutes" style="width:48px;">排序</div>
					<div class="cutline"></div>
						<div class=" attrbutes" style="width:48px;">上架</div>
					<div class="cutline"></div>
						<div class=" attrbutes" style="width:97px;">头像`	</div>
			</div>
			<div class="KKK">
			<div class="goods-lists clearfix">
				<div class="checkedbtn">
						<input type="checkbox" class="checkedbtn-itself2"/>
				</div>
				<div class="attrbutes1 text-center" style="width:147px;">5</div>
				<div class="attrbutes2 text-center" style="width:245px;">5</div>
				<div class="attrbutes3 text-center" style="width: 250px;">5</div>
				<div class="attrbutes4 text-center" style="width:99px;">5</div>
				<div class="attrbutes5 text-center" style="width:50px;">5</div>
				<div class="attrbutes6 text-center" style="width:50px;">5</div>
				<div class="attrbutes7 text-center" style="width:50px;">5</div>
				<div class="attrbutes8 text-center" style="width:99px;">
					<img src="./img/dante.jpg" style="width: 40px;height:40px">
				</div>
	        </div>
			</div>
			<div class="modal modal-add">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
						<div class="h4 inlineblock">新增商品</div>
							<span class="close" data-dismiss='modal' data-target=".modal-add">X</span>
						</div>
						<div class="modal-body">
							<form class="form-horizontal form-addcont">
								<div class="form-group">
									<label class="col-xs-2">商品名称</label>
									<div class="col-xs-8">
										<input name="name" class="form-control" type="text"/>
									</div>
								</div>
								<div class="form-group">
									<label class="col-xs-2">商品分类</label>
									<div class="col-xs-8">
										<select name="class" class="form-control goods-class">
											<option>1</option>
											<option>2</option>
											<option>3</option>
										</select>
									</div>
								</div>
								<div class="form-group">
									<label class="col-xs-2">商品价格</label>
									<div class="col-xs-8">
										<input name="price" class="form-control" type="number"/>
									</div>
								</div>
								<div class="form-group">
									<label class="col-xs-2">商品库存</label>
									<div class="col-xs-8">
										<input name="store" class="form-control" type="number"/>
									</div>
								</div>
								<div class="form-group">
									<label class="col-xs-2">商品图片</label>
									<div class="col-xs-8">
										<input name="img" class="form-control" type="file" accept="image/*"/>
									</div>
								</div>
							</form>
						</div>
						<div class="modal-footer">
							<a class="btn btn-default">取消</a>
							<a class="btn btn-primary goods-addbtn">新增</a>
						</div>
					</div>
				</div>
			</div>
	</body>
</html>
<script src="js/jquery-2.1.0.js"></script>
<script src="js/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
<script type="text/javascript" src="js/api.js"></script>
<script>
	function postcase(){
	$.ajax({
		type:"get",
		url:api+"/goods",
		async:true,
		datatype:'json',
		success:function(res){
			var idea = ``
			for(var prop of res.data){
			
				idea+=`<div class="goods-lists clearfix">
				<div class="checkedbtn">
						<input type="checkbox" class="checkedbtn-itself2"/>
				</div>
				<div class="attrbutes1 text-center" style="width:147px;">${prop.goodsID}</div>
				<div class="attrbutes2 text-center" style="width:245px;">${prop.goodsNAME}</div>
				<div class="attrbutes3 text-center" style="width: 250px;">${prop.classITEM	}</div>
				<div class="attrbutes4 text-center" style="width:99px;">${prop.goodsATTRIBUTE}</div>
				<div class="attrbutes5 text-center" style="width:50px;">${prop.goodsPRICE}</div>
				<div class="attrbutes6 text-center" style="width:50px;">111</div>
				<div class="attrbutes7 text-center" style="width:50px;">111</div>
				<div class="attrbutes8 text-center" style="width:99px;"><img src="${api}/${prop.img}" style="width: 30px;height:30px"></div>
	        </div>`
				}
			var fa = $('.KKK')
			fa.html(idea)
		}
	});
	}
	postcase()
	$.ajax({
		type:"get",
		url:api+"/class",
		async:true,
		datatype:'json',
		success:function(res){
			if(res.status==200){
			let html = ''
			for(let prop of res.data){
				
				html+='<option>'+ prop.classNAME +'</option>'
			}
			
			$('.goods-class').html(html)	
			
			}
		}
	})

	
	$('.goods-addbtn').click(function(){
		
	
		let form = document.querySelector('.form-addcont')
		
		let formda = new FormData(form)
				console.log(111)
		$.ajax({
			type:"post",
			url:api+'/goodscontent',
			data:formda,	
			dataType:'json',
			contentType:false,
			processData:false,
			success:function(res){	
				console.log(111)
			if(res.status==200){
		
			$('.modal-add').modal('hide');
			
			postcase();		
			}
			}
		});
		
	})
</script>